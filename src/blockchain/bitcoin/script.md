---
title: 脚本
category:
  - 区块链
  - 比特币
---

# 比特币脚本

比特币脚本（Bitcoin Script）是比特币网络中用于定义交易条件的编程语言，它是比特币安全性和灵活性的核心组成部分。

## 基本特性

比特币脚本是一种基于栈的、非图灵完备的编程语言。它具有以下特点：

- **基于栈操作**：所有操作都通过栈数据结构进行
- **非图灵完备**：没有循环结构，避免无限循环问题
- **确定性执行**：相同输入总是产生相同输出
- **简单安全**：设计简洁，减少安全漏洞

## 工作原理

比特币脚本分为两部分：
1. **锁定脚本（scriptPubKey）**：定义花费条件，包含在交易输出中
2. **解锁脚本（scriptSig）**：提供满足条件的数据，包含在交易输入中

验证过程是将解锁脚本和锁定脚本连接执行，如果最终栈顶为真值且脚本执行成功，则交易有效。

## 常见脚本类型

**P2PKH（Pay-to-Public-Key-Hash）**
最常见的脚本类型，要求提供公钥和相应的数字签名。

**P2SH（Pay-to-Script-Hash）**
允许更复杂的脚本，如多重签名。发送方只需知道脚本哈希，具体脚本由接收方定义。

**多重签名脚本**
要求m个签名中的n个才能花费资金，常用于企业资金管理或增强安全性。

## 操作码示例

比特币脚本包含多种操作码：
- `OP_DUP`：复制栈顶元素
- `OP_HASH160`：对数据进行哈希运算
- `OP_EQUALVERIFY`：验证两个值是否相等
- `OP_CHECKSIG`：验证数字签名


## 参考资料

- https://www.yuque.com/tmfl/block_chain/vkzgrigbsboi536m
